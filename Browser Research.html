<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mobile Browser Security Research - Authorized Testing</title>
    <!-- CRITICAL: This is for SECURITY RESEARCH with EXPLICIT PERMISSION only -->
    <style>
        /* SECURITY RESEARCH DISCLAIMER - ALWAYS VISIBLE */
        :root {
            --ios-blue: #007AFF;
            --android-blue: #4285F4;
            --safari-gray: #F2F2F7;
            --chrome-dark: #202124;
        }
        
        #researchBanner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, #FF3B30, #FF9500);
            color: white;
            padding: 12px 16px;
            text-align: center;
            font-weight: 600;
            z-index: 10000;
            font-size: 13px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            -webkit-touch-callout: none;
            user-select: none;
        }
        
        /* Mobile-specific viewport handling */
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Helvetica Neue', sans-serif;
            background: #FFFFFF;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            touch-action: pan-y;
        }
        
        html {
            height: -webkit-fill-available;
        }
        
        /* iOS Safari Bottom Bar Spoof */
        #iosBottomBar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 83px; /* Includes home indicator */
            background: rgba(242, 242, 247, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid rgba(0,0,0,0.1);
            z-index: 9999;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .ios-tab {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #8E8E93;
            font-size: 10px;
            -webkit-tap-highlight-color: transparent;
        }
        
        .ios-tab.active {
            color: var(--ios-blue);
        }
        
        /* Android Chrome Top Bar */
        #androidTopBar {
            position: fixed;
            top: 45px; /* Below research banner */
            left: 0;
            right: 0;
            height: 56px;
            background: var(--chrome-dark);
            display: flex;
            align-items: center;
            padding: 0 16px;
            z-index: 9998;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        
        /* PWA Install Banner Spoof */
        #pwaInstallBanner {
            position: fixed;
            bottom: 83px; /* Above iOS bottom bar */
            left: 0;
            right: 0;
            background: white;
            border-radius: 12px 12px 0 0;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
            padding: 16px;
            z-index: 9997;
            display: none;
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        /* Pull-to-Refresh Animation */
        .pull-refresh-indicator {
            position: fixed;
            top: -60px;
            left: 0;
            right: 0;
            height: 60px;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9996;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        /* Tab Switcher UI */
        #tabSwitcher {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 10001;
            display: none;
            flex-direction: column;
            padding: env(safe-area-inset-top) 0 env(safe-area-inset-bottom);
        }
        
        /* Research Controls */
        #researchControls {
            position: fixed;
            top: 100px;
            right: 16px;
            background: rgba(0,0,0,0.85);
            color: white;
            border-radius: 12px;
            padding: 16px;
            z-index: 10002;
            width: 280px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .control-btn {
            width: 100%;
            padding: 12px;
            margin: 6px 0;
            border: none;
            border-radius: 8px;
            background: var(--ios-blue);
            color: white;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Device Detection */
        #deviceInfo {
            position: fixed;
            bottom: 100px;
            left: 16px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 12px;
            border-radius: 8px;
            font-size: 12px;
            z-index: 9995;
            backdrop-filter: blur(10px);
        }
        
        /* Testing Content Area */
        .test-content {
            margin-top: 120px; /* Below all bars */
            padding: 20px;
            min-height: 200vh; /* Enable pull-to-refresh */
        }
        
        /* Safe area handling */
        @supports(padding: max(0px)) {
            .safe-area-top {
                padding-top: max(env(safe-area-inset-top), 20px);
            }
            .safe-area-bottom {
                padding-bottom: max(env(safe-area-inset-bottom), 20px);
            }
        }
    </style>
</head>
<body>
    <!-- RESEARCH BANNER - CANNOT BE HIDDEN -->
    <div id="researchBanner">
        üî¨ MOBILE BROWSER SECURITY RESEARCH | Auth: [COMPANY_AUTH_CODE] | Scope: UI Spoofing Analysis
    </div>
    
    <!-- iOS Safari Bottom Bar (Dynamic based on detection) -->
    <div id="iosBottomBar" style="display: none;">
        <div class="ios-tab active" onclick="logInteraction('iOS Back')">‚Üê</div>
        <div class="ios-tab" onclick="logInteraction('iOS Forward')">‚Üí</div>
        <div class="ios-tab" onclick="showTabSwitcher()">‚ò∞</div>
        <div class="ios-tab" onclick="logInteraction('iOS Share')">‚Üë</div>
        <div class="ios-tab" onclick="showBookmarks()">‚òÖ</div>
    </div>
    
    <!-- Android Chrome Top Bar -->
    <div id="androidTopBar" style="display: none;">
        <div style="color: white; font-size: 18px; margin-right: 12px;">‚Üê</div>
        <div id="androidUrlBar" style="flex: 1; color: #E8EAED; font-size: 14px;">
            https://secure.[TARGET_DOMAIN].com
        </div>
        <div style="color: #34A853; margin-right: 16px;">üîí</div>
        <div style="color: white; font-size: 18px;">‚ãÆ</div>
    </div>
    
    <!-- PWA Install Banner -->
    <div id="pwaInstallBanner">
        <div style="display: flex; align-items: center; margin-bottom: 12px;">
            <div style="width: 40px; height: 40px; background: var(--ios-blue); border-radius: 8px; margin-right: 12px;"></div>
            <div style="flex: 1;">
                <div style="font-weight: 600;">Install [TARGET_APP]</div>
                <div style="font-size: 13px; color: #8E8E93;">Available on your Home Screen</div>
            </div>
        </div>
        <button class="control-btn" onclick="logInteraction('PWA Install Clicked')" style="background: var(--ios-blue);">
            Add to Home Screen
        </button>
        <button onclick="hidePwaBanner()" style="width: 100%; padding: 12px; background: transparent; border: none; color: var(--ios-blue); font-weight: 600;">
            Not Now
        </button>
    </div>
    
    <!-- Pull to Refresh Indicator -->
    <div class="pull-refresh-indicator" id="pullRefresh">
        <div style="display: flex; align-items: center;">
            <div style="width: 24px; height: 24px; border: 2px solid #007AFF; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; margin-right: 12px;"></div>
            Refreshing...
        </div>
    </div>
    
    <!-- Tab Switcher UI -->
    <div id="tabSwitcher">
        <div style="padding: 16px; display: flex; justify-content: space-between; align-items: center;">
            <div style="color: white; font-size: 20px; font-weight: 600;">Tabs</div>
            <div style="color: var(--ios-blue); font-size: 16px;" onclick="closeTabSwitcher()">Done</div>
        </div>
        <div style="flex: 1; overflow-y: auto; padding: 16px;">
            <!-- Dynamic tabs will be added here -->
        </div>
    </div>
    
    <!-- Research Controls -->
    <div id="researchControls">
        <h4 style="margin: 0 0 12px 0; color: white;">Research Controls</h4>
        <button class="control-btn" onclick="toggleIosBar()">
            Toggle iOS Safari UI
        </button>
        <button class="control-btn" onclick="toggleAndroidBar()">
            Toggle Android Chrome UI
        </button>
        <button class="control-btn" onclick="showPwaBanner()">
            Show PWA Banner
        </button>
        <button class="control-btn" onclick="simulatePullToRefresh()">
            Test Pull-to-Refresh
        </button>
        <button class="control-btn" onclick="rotateDevice()" style="background: #FF9500;">
            Rotate Device (Sim)
        </button>
        <button class="control-btn" onclick="exportResearchLogs()" style="background: #34C759;">
            Export Logs
        </button>
        <button class="control-btn" onclick="endResearchSession()" style="background: #FF3B30;">
            End Research
        </button>
    </div>
    
    <!-- Device Info Panel -->
    <div id="deviceInfo">
        <div>Device: <span id="detectedDevice">Detecting...</span></div>
        <div>Orientation: <span id="currentOrientation">Portrait</span></div>
        <div>Viewport: <span id="viewportSize">0x0</span></div>
    </div>
    
    <!-- Testing Content -->
    <div class="test-content">
        <h1>Mobile Browser Security Research</h1>
        <div style="background: #F2F2F7; padding: 20px; border-radius: 12px; margin: 20px 0;">
            <h3>Research Objectives:</h3>
            <ul>
                <li>Analyze mobile browser UI spoofing vectors</li>
                <li>Test PWA install prompt spoofing</li>
                <li>Evaluate pull-to-refresh security implications</li>
                <li>Document tab switcher UI manipulation risks</li>
            </ul>
        </div>
        
        <!-- Interactive Test Elements -->
        <div style="text-align: center; margin: 40px 0;">
            <button onclick="testSecureArea()" style="padding: 16px 32px; background: var(--ios-blue); color: white; border: none; border-radius: 12px; font-size: 16px;">
                Test Secure Interaction
            </button>
        </div>
        
        <!-- Research Log Display -->
        <div id="researchLog" style="background: #1C1C1E; color: white; padding: 20px; border-radius: 12px; margin-top: 40px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;">
            <div>[RESEARCH] Session initialized...</div>
        </div>
    </div>

    <script>
        // ============================================
        // MOBILE BROWSER SECURITY RESEARCH FRAMEWORK
        // Authorized Testing Only - Legal Compliance Required
        // ============================================

        // Research Configuration
        const RESEARCH_CONFIG = {
            sessionId: 'MBR-' + Date.now() + '-' + Math.random().toString(36).substr(2, 6),
            authorizedCompany: '[COMPANY_NAME]',
            authCode: '[AUTH_CODE]',
            scope: 'Mobile Browser UI Security Analysis',
            targetBrowser: 'Chrome Mobile 125+ / Safari iOS 18+',
            legalDisclaimer: 'This research is conducted under explicit written permission'
        };

        // Research Logs
        let researchLogs = [];
        let deviceType = 'unknown';
        let orientation = 'portrait';

        // Initialize Research Session
        function initResearchSession() {
            logResearch('Session initialized', RESEARCH_CONFIG.sessionId);
            logResearch('Authorization', RESEARCH_CONFIG.authorizedCompany);
            logResearch('Scope', RESEARCH_CONFIG.scope);
            
            // Detect device and browser
            detectDevice();
            setupEventListeners();
            updateDeviceInfo();
            
            // Auto-start based on device detection
            setTimeout(() => {
                if (deviceType.includes('iOS')) {
                    toggleIosBar();
                } else if (deviceType.includes('Android')) {
                    toggleAndroidBar();
                }
            }, 1000);
        }

        // Device Detection
        function detectDevice() {
            const ua = navigator.userAgent;
            
            if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {
                deviceType = 'iOS';
                document.title = 'iOS Safari Security Research';
            } else if (/Android/.test(ua)) {
                deviceType = 'Android';
                document.title = 'Android Chrome Security Research';
            } else {
                deviceType = 'Desktop/Other';
                document.title = 'Mobile Browser Security Research';
            }
            
            logResearch('Device detected', deviceType);
            logResearch('User Agent', ua);
        }

        // Update Device Info Display
        function updateDeviceInfo() {
            document.getElementById('detectedDevice').textContent = deviceType;
            document.getElementById('currentOrientation').textContent = orientation;
            document.getElementById('viewportSize').textContent = 
                window.innerWidth + 'x' + window.innerHeight;
            
            // Detect orientation
            if (window.innerWidth > window.innerHeight) {
                orientation = 'landscape';
            } else {
                orientation = 'portrait';
            }
        }

        // iOS Safari UI Controls
        function toggleIosBar() {
            const iosBar = document.getElementById('iosBottomBar');
            const androidBar = document.getElementById('androidTopBar');
            
            if (iosBar.style.display === 'none' || iosBar.style.display === '') {
                iosBar.style.display = 'flex';
                androidBar.style.display = 'none';
                logResearch('UI Spoofing', 'iOS Safari bottom bar activated');
                simulatePullToRefresh();
            } else {
                iosBar.style.display = 'none';
                logResearch('UI Spoofing', 'iOS Safari bottom bar deactivated');
            }
        }

        // Android Chrome UI Controls
        function toggleAndroidBar() {
            const androidBar = document.getElementById('androidTopBar');
            const iosBar = document.getElementById('iosBottomBar');
            
            if (androidBar.style.display === 'none' || androidBar.style.display === '') {
                androidBar.style.display = 'flex';
                iosBar.style.display = 'none';
                logResearch('UI Spoofing', 'Android Chrome top bar activated');
            } else {
                androidBar.style.display = 'none';
                logResearch('UI Spoofing', 'Android Chrome top bar deactivated');
            }
        }

        // PWA Install Banner Simulation
        function showPwaBanner() {
            const banner = document.getElementById('pwaInstallBanner');
            banner.style.display = 'block';
            logResearch('PWA Spoofing', 'Install banner displayed');
            
            // Simulate native PWA prompt timing
            setTimeout(() => {
                logResearch('PWA Spoofing', 'User attention captured for 3+ seconds');
            }, 3000);
        }

        function hidePwaBanner() {
            document.getElementById('pwaInstallBanner').style.display = 'none';
            logResearch('PWA Spoofing', 'Install banner dismissed');
        }

        // Pull-to-Refresh Simulation
        function simulatePullToRefresh() {
            const indicator = document.getElementById('pullRefresh');
            
            // Show animation
            indicator.style.transform = 'translateY(60px)';
            logResearch('Pull-to-Refresh', 'Animation triggered');
            
            // Simulate refresh completion
            setTimeout(() => {
                indicator.style.transform = 'translateY(-60px)';
                logResearch('Pull-to-Refresh', 'Refresh completed (simulated)');
                logResearch('Security Note', 'Real attack could load malicious content here');
            }, 1500);
        }

        // Tab Switcher UI
        function showTabSwitcher() {
            const switcher = document.getElementById('tabSwitcher');
            const content = switcher.querySelector('div:nth-child(2)');
            
            // Generate fake tabs
            content.innerHTML = '';
            const fakeTabs = [
                { title: 'Secure Portal', url: 'https://secure.company.com' },
                { title: 'Email', url: 'https://mail.company.com' },
                { title: 'Banking', url: 'https://bank.company.com' },
                { title: 'Research Page', url: window.location.href }
            ];
            
            fakeTabs.forEach((tab, index) => {
                const tabEl = document.createElement('div');
                tabEl.style.cssText = `
                    background: #2C2C2E;
                    border-radius: 12px;
                    padding: 16px;
                    margin-bottom: 12px;
                    color: white;
                `;
                tabEl.innerHTML = `
                    <div style="font-weight: 600;">${tab.title}</div>
                    <div style="font-size: 13px; color: #8E8E93; margin-top: 4px;">${tab.url}</div>
                `;
                tabEl.onclick = () => {
                    logResearch('Tab Switcher', `Tab ${index} clicked: ${tab.url}`);
                    closeTabSwitcher();
                };
                content.appendChild(tabEl);
            });
            
            switcher.style.display = 'flex';
            logResearch('Tab Switcher', 'UI displayed with spoofed tabs');
        }

        function closeTabSwitcher() {
            document.getElementById('tabSwitcher').style.display = 'none';
        }

        // Device Rotation Simulation
        function rotateDevice() {
            if (orientation === 'portrait') {
                orientation = 'landscape';
                logResearch('Device Rotation', 'Simulated landscape mode');
                document.body.style.transform = 'rotate(90deg)';
                document.body.style.transformOrigin = 'center center';
                document.body.style.width = '100vh';
                document.body.style.height = '100vw';
            } else {
                orientation = 'portrait';
                logResearch('Device Rotation', 'Simulated portrait mode');
                document.body.style.transform = 'none';
                document.body.style.width = '100vw';
                document.body.style.height = '100vh';
            }
            updateDeviceInfo();
        }

        // Secure Area Testing
        function testSecureArea() {
            logResearch('Security Test', 'Secure interaction area clicked');
            
            // Check if we're in fullscreen/standalone mode
            if (window.matchMedia('(display-mode: standalone)').matches) {
                logResearch('PWA Mode', 'Running in standalone/installed mode');
            }
            
            // Test safe area insets
            const safeTop = CSS.supports('padding-top: env(safe-area-inset-top)');
            logResearch('Safe Area', `CSS env() supported: ${safeTop}`);
        }

        // Event Listeners for Research
        function setupEventListeners() {
            // Touch/mouse tracking for research
            document.addEventListener('touchstart', (e) => {
                logResearch('Touch Event', `Started at (${e.touches[0].clientX}, ${e.touches[0].clientY})`);
            }, { passive: true });
            
            // Orientation change
            window.addEventListener('resize', updateDeviceInfo);
            
            // Prevent context menu on research UI
            document.addEventListener('contextmenu', (e) => {
                if (e.target.closest('#researchControls, #iosBottomBar, #androidTopBar')) {
                    e.preventDefault();
                }
            });
            
            // Log all interactions
            document.addEventListener('click', (e) => {
                const targetId = e.target.id || e.target.className || e.target.tagName;
                logResearch('User Interaction', `Clicked: ${targetId}`);
            }, true);
        }

        // Logging System
        function logResearch(category, message) {
            const timestamp = new Date().toISOString();
            const logEntry = `[${timestamp}] [${category}] ${message}`;
            
            researchLogs.push(logEntry);
            
            // Update display
            const logDisplay = document.getElementById('researchLog');
            const logLine = document.createElement('div');
            logLine.textContent = logEntry;
            logDisplay.appendChild(logLine);
            logDisplay.scrollTop = logDisplay.scrollHeight;
            
            // Console output
            console.log(`üî¨ ${category}:`, message);
        }

        // Helper for interaction logging
        function logInteraction(action) {
            logResearch('UI Interaction', action);
        }

        // Export Research Data
        function exportResearchLogs() {
            const researchData = {
                session: RESEARCH_CONFIG,
                deviceInfo: {
                    type: deviceType,
                    orientation: orientation,
                    viewport: `${window.innerWidth}x${window.innerHeight}`,
                    userAgent: navigator.userAgent
                },
                logs: researchLogs,
                findings: generateFindingsReport()
            };
            
            const blob = new Blob([JSON.stringify(researchData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `mobile-browser-research-${RESEARCH_CONFIG.sessionId}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            logResearch('Data Export', 'Research logs exported');
        }

        // Generate Findings Report
        function generateFindingsReport() {
            return {
                vulnerabilityCategories: [
                    'UI Spoofing - Browser chrome can be replicated',
                    'PWA Prompt Spoofing - Native prompts can be mimicked',
                    'Pull-to-Refresh - Can trigger malicious actions',
                    'Tab Management - Fake tabs can deceive users',
                    'Device Orientation - Layout changes can hide UI elements'
                ],
                riskLevel: 'Medium-High',
                affectedBrowsers: 'All mobile browsers with customizable web content',
                mitigationRecommendations: [
                    'Implement Content Security Policy',
                    'Use Trusted Web Activity for PWAs',
                    'Educate users about browser UI elements',
                    'Consider browser extensions for UI verification',
                    'Monitor for abnormal interaction patterns'
                ]
            };
        }

        // End Research Session
        function endResearchSession() {
            logResearch('Session End', 'Research session completed');
            
            // Generate final report
            const finalReport = {
                summary: 'Mobile Browser UI Security Research Completed',
                sessionId: RESEARCH_CONFIG.sessionId,
                totalLogs: researchLogs.length,
                findings: generateFindingsReport(),
                legalCompliance: {
                    authorized: true,
                    scopeAdherence: 'Verified',
                    responsibleDisclosure: 'Will follow vendor policies'
                }
            };
            
            console.log('üìã FINAL RESEARCH REPORT:', finalReport);
            alert('Research session ended. Please save console logs for security report.');
            
            // Cleanup
            document.querySelectorAll('[id^="ios"], [id^="android"], #pwaInstallBanner, #tabSwitcher')
                .forEach(el => el.style.display = 'none');
        }

        // Initialize on load
        window.addEventListener('load', initResearchSession);
        window.addEventListener('orientationchange', updateDeviceInfo);

        // ============================================
        // SECURITY RESEARCH NOTES
        // ============================================
        /*
        RESEARCH METHODOLOGY FOR BUG BOUNTY:
        
        1. TEST ENVIRONMENT SETUP:
           - Use real mobile devices (iOS/Android)
           - Latest browser versions
           - Network monitoring tools
        
        2. TESTING FOCUS AREAS:
           a. UI Spoofing Detection
              - Can HTML/CSS replicate native UI?
              - Does browser provide visual indicators?
              
           b. PWA Security
              - Can install prompts be spoofed?
              - Does standalone mode provide security benefits?
              
           c. Gesture Security
              - Can pull-to-refresh be hijacked?
              - Are gesture boundaries properly enforced?
              
           d. Tab/Session Management
              - Can fake tab switchers be created?
              - Does browser protect session state?
        
        3. REPORTING GUIDELINES:
           - Include video proof of concept
           - Document browser version and OS
           - Show real vs spoofed UI comparison
           - Provide specific reproduction steps
        
        4. ETHICAL CONSIDERATIONS:
           - Only test authorized targets
           - Do not affect real users
           - Follow responsible disclosure
           - Respect vendor bounty program rules
        */
    </script>
</body>
</html>